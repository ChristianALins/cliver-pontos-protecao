<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pontos - CLIVER Corretora</title>
    <style>
        :root { --primary: #1a73e8; --secondary: #34a853; --dark: #202124; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: var(--dark); border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .card { border: 1px solid #ddd; padding: 20px; border-radius: 8px; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input, select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background: var(--primary); color: white; border: none; padding: 12px 20px; margin-top: 15px; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold; }
        button:hover { opacity: 0.9; }
        .btn-secondary { background: var(--secondary); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: left; }
        th { background: var(--light); }
        .dashboard { display: flex; justify-content: space-between; margin-bottom: 30px; background: var(--dark); color: white; padding: 20px; border-radius: 8px; }
        .stat { text-align: center; }
        .stat-value { font-size: 24px; font-weight: bold; color: var(--secondary); }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sistema Administrativo de Pontos - CLIVER</h1>
        <div class="dashboard">
            <div class="stat"><div>Total Clientes</div><div class="stat-value" id="countClientes">0</div></div>
            <div class="stat"><div>Pontos Ativos</div><div class="stat-value" id="totalPontos">0</div></div>
            <div class="stat"><div>Resgates</div><div class="stat-value" id="totalResgates">0</div></div>
        </div>
        <div class="grid">
            <div class="card">
                <h3>Cadastrar Novo Cliente</h3>
                <label>Nome Completo</label><input type="text" id="nome">
                <label>CPF</label><input type="text" id="cpf">
                <label>Seguro</label>
                <select id="seguro">
                    <option value="Automóvel">Automóvel</option>
                    <option value="Vida">Vida</option>
                    <option value="Residencial">Residencial</option>
                </select>
                <button onclick="cadastrarCliente()">Cadastrar</button>
            </div>
            <div class="card">
                <h3>Lançar Movimentação</h3>
                <label>Cliente</label><select id="selectCliente"></select>
                <label>Ação</label>
                <select id="tipoAcao" onchange="toggleCustom()">
                    <option value="renovacao">Renovação (500)</option>
                    <option value="produto">2º Produto (1000)</option>
                    <option value="indicacao">Indicação (1500)</option>
                    <option value="custom">Customizado</option>
                </select>
                <div id="divCustom" style="display:none"><input type="number" id="ptsCustom"></div>
                <button class="btn-secondary" onclick="lancar()">Lançar</button>
            </div>
        </div>
        <table id="tabela">
            <thead><tr><th>Nome</th><th>CPF</th><th>Saldo</th><th>Ações</th></tr></thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        const KEY = 'programaPontosProtecao_v1';
        let dados = JSON.parse(localStorage.getItem(KEY)) || { clientes: [], movimentacoes: [] };
        function salvar() { localStorage.setItem(KEY, JSON.stringify(dados)); atualizar(); }
        function cadastrarCliente() {
            const n = document.getElementById('nome').value, c = document.getElementById('cpf').value, s = document.getElementById('seguro').value;
            if(n&&c) { dados.clientes.push({nome:n, cpf:c, seguro:s}); salvar(); }
        }
        function lancar() {
            const c = document.getElementById('selectCliente').value, a = document.getElementById('tipoAcao').value;
            let p = a==='renovacao'?500:a==='produto'?1000:a==='indicacao'?1500:parseInt(document.getElementById('ptsCustom').value);
            if(c) { dados.movimentacoes.push({cpf:c, pontos:p, data:new Date().toLocaleString()}); salvar(); }
        }
        function toggleCustom() { document.getElementById('divCustom').style.display = document.getElementById('tipoAcao').value==='custom'?'block':'none'; }
        function atualizar() {
            const tbody = document.querySelector('#tabela tbody'), sel = document.getElementById('selectCliente');
            tbody.innerHTML = ''; sel.innerHTML = '<option value="">--</option>';
            let tp = 0;
            dados.clientes.forEach(cl => {
                const s = dados.movimentacoes.filter(m=>m.cpf===cl.cpf).reduce((acc,m)=>acc+m.pontos,0);
                tp += s;
                tbody.innerHTML += `<tr><td>${cl.nome}</td><td>${cl.cpf}</td><td>${s}</td><td><button onclick="remover('${cl.cpf}')">X</button></td></tr>`;
                sel.innerHTML += `<option value="${cl.cpf}">${cl.nome}</option>`;
            });
            document.getElementById('countClientes').innerText = dados.clientes.length;
            document.getElementById('totalPontos').innerText = tp;
        }
        function remover(c) { dados.clientes=dados.clientes.filter(x=>x.cpf!==c); dados.movimentacoes=dados.movimentacoes.filter(x=>x.cpf!==c); salvar(); }
        atualizar();
    </script>
</body>
</html>